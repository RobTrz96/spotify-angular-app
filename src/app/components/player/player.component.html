<div class="music-player">
  <div class="track-info">
    <img
      *ngIf="currentTrack"
      [src]="currentTrack.album.images[0].url"
      alt="Album Art"
      (click)="viewTrackDetails()"
      class="clickable"
    />
    <div>
      <h3>{{ currentTrack?.name || "No track playing" }}</h3>
      <p>{{ currentTrack?.artists?.[0]?.name || "No track playing" }}</p>
    </div>
  </div>

  <div class="controls">
    <button (click)="previousTrack()">⏮</button>
    <button (click)="togglePlayPause()">
      {{ isPlaying ? "⏸ Pause" : "▶️ Play" }}
    </button>
    <button (click)="nextTrack()">⏭</button>
  </div>

  <div class="volume">
    <input
      type="range"
      min="0"
      max="100"
      [value]="volume"
      (input)="adjustVolume($event)"
    />
  </div>

  <div class="seek-bar">
    <input
      type="range"
      min="0"
      [max]="currentTrack?.duration_ms || 0"
      [value]="progressMs"
      (input)="seekTo($event)"
    />
    <span>{{ progressMs | duration }}</span> /
    <span>{{ currentTrack!.duration_ms | duration }}</span>
  </div>
</div>

<div class="track-details-modal" *ngIf="showTrackDetails">
  <button class="close" (click)="closeTrackDetails()">×</button>
  <app-track [trackId]="currentTrack?.id || ''"></app-track>
</div>
